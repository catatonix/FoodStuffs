<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/paper-input/paper-input.html"><link rel="import" href="../bower_components/iron-icon/iron-icon.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/paper-time-input/paper-time-input.html"><link rel="import" href="../bower_components/paper-styles/color.html"><link rel="import" href="../bower_components/vaadin-date-picker/vaadin-date-picker.html"><link rel="import" href="../bower_components/polymerfire/firebase-query.html"><link rel="import" href="shared-styles.html"></head><body><dom-module id="my-add-meal"><template><style include="shared-styles">:host{display:block;padding:10px;}paper-time-input{display:inline-block;}#meal-content p{display:inline-block;width:90%;}#meal-content paper-icon-button{display:inline-block;}paper-button.green{background-color:var(--paper-green-500);color:white;}#add-meal{left:50%;transform:translateX(-50%);padding:5px 100px;}paper-time-input, vaadin-date-picker{vertical-align:bottom;margin-left:2em;}#timeIcon{margin-bottom:10px;}</style><firebase-auth id="auth" user="{{user}}" provider="google" on-error="handleError"></firebase-auth><firebase-query id="contentQuery" path="/users/[[user.uid]]/meals/draft/content" data="{{mealContents}}"></firebase-query><firebase-query id="mealsQuery" path="/users/[[user.uid]]/meals" data="{{meals}}"></firebase-query><div class="card"><h1>Add Meal</h1><paper-input label="Meal Name" id="mealLabel" required="" auto-validate=""><iron-icon src="/images/icons/meal.svg" slot="prefix"></iron-icon></paper-input><div class="start-time"><iron-icon id="timeIcon" src="/images/icons/time.svg" slot="prefix"></iron-icon><paper-time-input id="mealTime" hour="3" min="05" am-pm="PM" label="Start Time" required="" auto-validate=""></paper-time-input><vaadin-date-picker id="mealDate" label="Pick a date" required="" auto-validate="" pattern="/^[0-9\/]+$/"></vaadin-date-picker></div></div><div class="card"><paper-input label="Meal Item" id="newContent" required=""><paper-button slot="suffix" on-tap="addContent">Add</paper-button></paper-input><template is="dom-repeat" items="[[mealContents]]" as="mealContent"><ul id="meal-content"><li><p>[[mealContent.$val]]</p><paper-icon-button src="/images/icons/trash.svg" note="[[mealContent]]" on-tap="remove"></paper-icon-button></li></ul></template></div><div class="card"><paper-button raised="" class="green" on-tap="addMeal">Add Meal</paper-button></div></template><script>class MyAddMeal extends Polymer.Element{static get is(){return"my-add-meal"}static get Properties(){return{mealContents:{type:Object},meals:{type:Object}}}addContent(){var a=this.$.newContent.value;a?(this.$.contentQuery.ref.push(a),this.$.newContent.value=null):console.log("> addContent() called... but no content was added.")}addMeal(){var a=this.$.mealLabel.value,b=this.$.mealDate.value+this.$.mealTime.value,c={};if(a&&b){this.mealContents.forEach(function(a){c[a.$key]=a.$val},this);this.$.mealsQuery.ref.push({label:a,datetime:b,content:c})}else console.log("> addMeal() called... but no meal added.")}remove(a){var b=a.currentTarget.note.$key;this.$.contentQuery.ref.child(b).remove()}}var contents=this.mealContents;customElements.define(MyAddMeal.is,MyAddMeal);</script></dom-module></body></html>